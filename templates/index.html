{% extends "base.html" %}

    <title>
        My site
    </title>

{% block body %}
            //under construction
            <br>
            <p>I recently quit my job at Microsoft and moved to the Bay Area to figure out what's next. The working hypothesis is that having no plan is the best plan.</p>
            <p>You can see my online presence <a href='https://www.facebook.com/jsgarcha'>here</a>.
            <br>
            You can see my other online presence <a href='http://www.linkedin.com/in/jgarcha'>here</a>.
            <br>
            You can see my other online presence <a href='https://twitter.com/jasgarch'>here</a>.
            <br>
            I answer questions <a href='http://www.quora.com/Jasdeep-Garcha-1'>here</a>.
            <br>
            I'm expanding my investment portfolio <a href='http://www.kickstarter.com/profile/538825346'>here</a>.
            <br>
            Often, I take <a href='https://plus.google.com/photos/102125146498606378907/albums/5790339433728682769?authkey=CPre5_31rf7FYg'>pictures</a> of people's faces.
            <div id='projects'>
                <h3>Projects</h3>
                <div id='timeline'></div>
                <div id='project-list'></div>
                <div id='2012' style='display:none'>
                    <h4>2012</h4>
                    <ol>
                        <li><a href='/bounce'>I just wanna hold your hand</a> - 48 hours. Activate neglected urban spaces.
                            <br>
                            <span class='skills'>Pieces:</span> Electronics, Metal fabrication, 3D printing
                            <br>
                            <span class='skills'>Frameworks:</span> Arduino, Processing
                        </li>
                        <li><a href='/bounce'>Bounce</a> - First project using the D3JS framework.
                            <br>
                            <span class='skills'>Pieces:</span> Web programming
                            <br>
                            <span class='skills'>Frameworks:</span> Python (Flask), CSS, D3, JQuery
                        </li>
                        <li><a href='/image'>Image</a> - Recreating the scratch-off experience for the interwebs.
                            <br>
                            <span class='skills'>Pieces:</span> Web programming
                            <br>
                            <span class='skills'>Frameworks:</span> Python (Flask), CSS, D3, JQuery
                        </li>
                    </ol>
                </div>
            </div>
{% endblock %}
    
{% block js %}
    <script type="text/javascript">
        // create timeline of projects
        var w = $('#container').css('width'),
            tmp = w.split('px'),
            int_w = parseInt(tmp[0])
            h = 200,
            margin = {bottom: 20, top: 20},
            padding = 5;

        var dates = ['2006', '2007', '2008', '2009', '2010', '2011', '2012']
        var num_projects = [0,0,0,0,0,0,3]
        var bar_width = int_w/dates.length-padding;


        // scales

        var xScale = d3.scale.linear()
                            .domain([0,num_projects.length])
                            .range([0,w]),
            yScale = d3.scale.linear()
                            .domain([0,Math.max.apply(Math,num_projects)])
                            .range([margin.top,h-margin.bottom])

        // canvas
        var timeline_canvas = d3.selectAll('#timeline')
                                    .append('svg')
                                    .attr('width', w)
                                    .attr('height', h)

        var time_bars = timeline_canvas.selectAll('rect')
                                        .data(dates)
                                        .enter()
                                        .append('rect')
                                        .attr('x', function(d,i){
                                            return xScale(i);
                                        })
                                        .attr('y', function(d,i){
                                            return (h+margin.top)-margin.bottom-yScale(num_projects[i]);
                                        })
                                        .attr('height', function(d,i){
                                            return yScale(num_projects[i])-margin.top;
                                        })
                                        .attr('width', bar_width)
                                        .attr('class', function(d,i){
                                            return d;
                                        })
                                        .attr('fill','navy')

        time_bars.on('mouseover', function(){
                d3.select(d3.event.target).style('stroke', 'yellow');
                d3.select(d3.event.target).style('stroke-width', 5);
            })
            .on('mouseout', function(){
                d3.select(d3.event.target).style('stroke-width', 0);

                string = this.className.baseVal;
                split_string = string.split(' ');
            })
            .on('click', function(){
                string = this.className.baseVal;

                var $div_of = $('#'+string);

                if ($div_of.is(':hidden')) {
                    $div_of.show();
                }
                else{
                    $div_of.hide();
                }
            })

        // add axes
        timeline_canvas.append('line')
                .data(yScale.ticks(12))
                .attr("y1", h-margin.bottom)
                .attr("y2", h-margin.bottom)
                .attr("x1", 0)
                .attr("x2", w)
                .attr('stroke', '#eee')

        // add text
        timeline_canvas.selectAll('text')
                .data(dates)
                .enter()
                .append('text')
                .attr('y', h-margin.bottom/2)
                .attr('x', function(d,i){
                    split_x = xScale(i).split('px');
                    int_x_scale = parseInt(split_x[0]);
                    return int_x_scale+bar_width/2;
                })
                .attr('dx',-10)
                .style('font-size', 10)
                .attr('class', 'x-axis')
                .text(function(d,i){
                    return d;
                });

        timeline_canvas.append('g')
                .selectAll('text')
                .data(xScale.ticks(12))
                .enter()
                .append('text')
                .attr('y', function(d,i){
                    return (h+margin.top)-margin.bottom-yScale(num_projects[i]);
                })
                .attr('x', function(d,i){
                    split_x = xScale(i).split('px');
                    int_x_scale = parseInt(split_x[0]);
                    return int_x_scale+bar_width/2;
                })
                .attr('dx',-1)
                .attr('dy', -2)
                .style('font-size', 10)
                .attr('class', 'x-axis')
                .text(function(d,i){
                    return num_projects[i];
                });

        function proj_square(){
            this.class = '';



        }

    </script>
{% endblock %}
